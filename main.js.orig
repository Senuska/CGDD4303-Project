<<<<<<< HEAD
enchant();

window.onload = function(){
    var game = new Core(800, 600);
	var menu_scene = new Scene();
	var play_scene = new Scene();
    game.fps = 30;
    game.preload("chara1.png", "button.png");
	
	
    game.onload = function(){
		//Define the Menu Scene
		game.pushScene(menu_scene);
		
		play_button = new Sprite(64, 32);

		play_button.image = game.assets["button.png"];
		
		play_button.x = 800/2 - 32;
		play_button.y = 600/2
		menu_scene.addChild(play_button);
		
		//Handles input for the play button
        menu_scene.addEventListener('touchstart', function(e){
			if(e.localX > play_button.x && e.localX < play_button.x + 64)
			{
				if(e.localY > play_button.y && e.localY  < play_button.y + 32)
				{
					game.popScene();
					game.pushScene(play_scene);
				}
			}
        });
		
		//Define the Play Scene
		back_button = new Sprite(32, 32);
		
		back_button.image = game.assets["button.png"];
		
		back_button.x = 0;
		back_button.y = 0;
		
		play_scene.addChild(back_button);
		
		play_scene.addEventListener('touchstart', function(e){
			//Handles input for the back button
			if(e.localX > back_button.x && e.localX < back_button.x + 32)
			{
				if(e.localY > back_button.y && e.localY  < back_button.y + 32)
				{
					game.popScene();
					game.pushScene(menu_scene);
				}
			}
=======
/**
 * enchant();
 * Preparation for using enchant.js.
 * (Exporting enchant.js class to global namespace.
 *  ex. enchant.Sprite -> Sprite etc..)
 *
 */
enchant();

/*
 * window.onload
 *
 * The function which will be executed after loading page.
 * Command in enchant.js such as "new Core();" will cause an error if executed before entire page is loaded.
 *
 */
window.onload = function(){
    /**
     * new Core(width, height)
     *
     * Make instance of enchant.Core class. Set window size to 320 x 320
     */
    var game = new Core(400, 400);

    /**
     * Core.fps
     *
     * Set fps (frame per second) in this game to 30.
     */
    game.fps = 30;
    /**
     * Core.preload
     *
     * You can preload all assets files before starting the game.
     * Set needed file lists in relative/absolute path for attributes of Core.preload
     */
    game.preload("Background.png", "Cannon.png", "Bullet.png");

    /**
     * Core.onload
     *
     * game.onload = function(){
     *     // code
     * }
     *
     * game.addEventListener("load", function(){
     *     // code
     * })
     */
    game.onload = function(){

        backgroundImage = new Sprite(400, 400);
        cannon = new Sprite(100, 50);
        bullet = new Sprite(50, 50);

        backgroundImage.image = game.assets["Background.png"];
        cannon.image = game.assets["Cannon.png"];
        bullet.image = game.assets["Bullet.png"];

        backgroundImage.x = 0;
        backgroundImage.y = 0;
        
        cannon.x = 50;
        cannon.y = 250;
        
        bullet.x = 100;
        bullet.y = 0;

        backgroundImage.frame = 0;
        cannon.frame = 0;
        bullet.frame = 0;
        
        game.rootScene.addChild(backgroundImage);
        game.rootScene.addChild(cannon);
      

        /*
          Add an event to an object:

          EventTarget.addEventListener(event, listener)
         */         
        	cannon.addEventListener("touchstart", function(){
        		bullet.x = 100;
        		bullet.y = 0;
            	game.rootScene.addChild(bullet);  
        	});
		
		
        bullet.addEventListener("enterframe", function(){

            this.x += 10;
            
            if(this.x >= 400)
            {
            	game.rootScene.removeChild(this);	
            }
>>>>>>> origin/master
        });

    };

    game.start();
};
